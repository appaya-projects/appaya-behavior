!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=5)}([function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{constructor(e,t,n){this.element=e,this._options=t,this.children=n,this.options={}}beforeInit(){this.mergeOptions(this._options)}mergeOptions(e){for(let e in this.defaultOptions)this.options[e]=this.defaultOptions[e];for(let t in e)this.options[t]=e[t]}addChildren(e,t){this.children[e]=t}removeChildren(e){delete this.children[e]}}},function(e,t,n){"use strict";var r=n(0);class i{static post(e,t){return this.request("POST",e,t)}static request(e,t,n){const r=new XMLHttpRequest,i=n,s=this.getData(i),o=i.form.getAttribute("enctype")?i.form.getAttribute("enctype"):"application/x-www-form-urlencoded";r.overrideMimeType&&r.overrideMimeType("text/xml");let a=new Promise((e,t)=>{r.onreadystatechange=(()=>{4==r.readyState&&(r.status>=200&&r.status<300?e(r):t(r))})});if(r.open(e,t,!0,i.user,i.password),i.headers)for(let e in i.headers)r.setRequestHeader(e,i.headers[e]);return o&&r.setRequestHeader("Content-Type",o),r.send(s),a}static getData(e){let t={},n=e.form.getAttribute("enctype")?e.form.getAttribute("enctype"):"application/x-www-form-urlencoded";const r=e.form.elements;for(let e=0;e<r.length;e++){const n=r[e];"submit"!=n.type&&(t[n.name]=n.value)}let i="";for(let e in t)i+=e+"="+t[e]+"&";return i.length>1&&(i=i.substring(0,i.length-1)),"application/json"==n?JSON.stringify(t):"application/x-www-form-urlencoded"==n?i:new FormData(e.form)}}var s=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}l((r=r.apply(e,t||[])).next())})};class o extends r.a{constructor(){super(...arguments),this.defaultOptions={messageFailure:void 0,messageSuccess:void 0}}init(){"FORM"==this.element.nodeName?(this.build(),this.eventsHandler()):console.warn("FormBehavior: element should be form, skip. ",this.element)}build(){this.element.insertAdjacentHTML("afterend",'\n\t\t\t<div class="ajax-box"></div>\n\t\t'),this.ajaxBox=this.element.nextElementSibling}clearForm(){const e=this.element.querySelectorAll('input:not([type="submit"]), textarea');for(let t=0;t<e.length;t++)e[t].value=""}eventsHandler(){this.element.addEventListener("submit",e=>s(this,void 0,void 0,function*(){e.preventDefault(),this.sendForm()}))}sendForm(){return s(this,void 0,void 0,function*(){if(!this.element.checkValidity())return;let e=this.element;const t=this.element.getAttribute("action");if(t){this.onSend();try{const n=yield i.post(t,{form:e,headers:{Accept:"application/json, text/plain, */*"}});this.clearForm(),this.onSuccess(n)}catch(e){console.warn("Request error.",this.element,e),this.onFailure(e)}}else console.warn("Action attribute undefined.",this.element)})}onSuccess(e){this.ajaxBox.classList.add("ajax-box--sent");let t=this.options.messageSuccess?this.options.messageSuccess:e.responseText;this.ajaxBox.innerHTML="<p>"+t+"</p>"}onFailure(e){this.ajaxBox.classList.add("ajax-box--error");let t=this.options.messageFailure?this.options.messageFailure:e.responseText;this.ajaxBox.innerHTML="<p>"+t+"</p>"}onSend(){this.ajaxBox.classList.add("ajax-box--pending")}}o.behaviorName="form-ajax",n.d(t,"a",function(){return o})},function(e,t,n){"use strict";var r=n(0);class i{constructor(e,t=e,n="afterend"){this.input=e,this.insertElement=t,this.insertPosition=n,this.create()}get errorElement(){return this._errorElement}set message(e){this._errorElement.innerHTML=e}create(){if(this.input.parentElement&&(this._errorElement=this.input.parentElement.querySelector(`[error-for="${this.input.name}"]`),!this._errorElement)){let e=document.createElement("DIV");e.classList.add("error-message"),e.setAttribute("error-for",this.input.name),e.setAttribute("aria-live","polite"),this._errorElement=this.input.parentElement.insertBefore(e,this.input.nextSibling),this.insertElement.insertAdjacentElement(this.insertPosition,this._errorElement)}}clear(){this._errorElement.innerHTML=""}}class s extends r.a{constructor(){super(...arguments),this.defaultOptions={type:"mixed",first:!1},this.inputErrors=new Array}init(){if("FORM"==this.element.nodeName){void 0==this.options.type&&(this.options.type="mixed"),this.inputs=this.element.querySelectorAll('input:not([type="submit"]), textarea');for(let e=0;e<this.inputs.length;e++)this.createInputError(this.inputs[e]);this.eventsHandler()}else console.warn("FormBehavior: element should be form, skip. ",this.element)}eventsHandler(){const e=this.options.type;if(this.element.addEventListener("submit",e=>{let t=!0;for(let e=0;e<this.inputs.length;e++){let n=this.inputValidProcess(this.inputs[e]);if(n||(t=n),this.options.first&&!n)break}t||e.preventDefault()}),"keyup"==e||"mixed"==e)for(let t=0;t<this.inputs.length;t++){const n=this.inputs[t];n.addEventListener("keyup",()=>{"mixed"==e&&"true"!=n.getAttribute("dirty")||this.inputValidProcess(n)})}}inputValidation(e){return e.checkValidity()}inputValidProcess(e){const t=this.getInputError(e),n=this.inputValidation(e);if(n)t.clear(),this.onInputValid(e);else{const n=this.getErrorMessage(e);t.message=n,e.setAttribute("dirty","true"),this.onInputError(e)}return n}getErrorMessage(e){let t=e.validity,n=e.validationMessage;for(let r in t){if(!t[r])continue;let i=e.dataset[r];if(i){n=i;break}}return n}onInputError(e){e.classList.add("error")}onInputValid(e){e.classList.remove("error")}createInputError(e){this.inputErrors.push(new i(e))}getInputError(e){let t=this.inputErrors.find(t=>t.input==e);return t||(t=new i(e)),t}}s.behaviorName="form-validate",n.d(t,"a",function(){return s})},,,function(e,t,n){"use strict";n.r(t);var r=n(1);n.d(t,"FormAjaxBehavior",function(){return r.a});var i=n(2);n.d(t,"FormValidateBehavior",function(){return i.a})}]);
//# sourceMappingURL=behaviors-list-basic.js.map